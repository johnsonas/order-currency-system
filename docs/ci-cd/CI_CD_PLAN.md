# CI/CD è¦åŠƒæ–‡ä»¶

## ğŸ“‹ ç³»çµ±æ¶æ§‹æ¦‚è¿°

- **å¾Œç«¯**: Spring Boot 3.2.0 (Java 17)
- **å‰ç«¯**: Vue.js 3 + Vite
- **è³‡æ–™åº«**: Oracle (Docker)
- **å¿«å–**: Redis (Docker)
- **æ¸¬è©¦**: JUnit 5 + H2 (æ¸¬è©¦ç”¨è³‡æ–™åº«)
- **ä»£ç¢¼è¦†è“‹ç‡**: JaCoCo

## ğŸ¯ CI/CD ç›®æ¨™

1. **è‡ªå‹•åŒ–æ¸¬è©¦**: æ¯æ¬¡æäº¤è‡ªå‹•åŸ·è¡Œå–®å…ƒæ¸¬è©¦å’Œæ•´åˆæ¸¬è©¦
2. **ä»£ç¢¼è³ªé‡æª¢æŸ¥**: æª¢æŸ¥ä»£ç¢¼è¦†è“‹ç‡ã€éœæ…‹åˆ†æ
3. **è‡ªå‹•æ§‹å»º**: æ§‹å»º Docker æ˜ åƒ
4. **è‡ªå‹•éƒ¨ç½²**: éƒ¨ç½²åˆ°ä¸åŒç’°å¢ƒï¼ˆé–‹ç™¼ã€æ¸¬è©¦ã€ç”Ÿç”¢ï¼‰
5. **ç‰ˆæœ¬ç®¡ç†**: è‡ªå‹•ç‰ˆæœ¬æ¨™è¨˜å’Œç™¼å¸ƒ

## ğŸ”„ CI/CD æµç¨‹è¨­è¨ˆ

### éšæ®µ 1: CI (Continuous Integration)

#### è§¸ç™¼æ¢ä»¶
- Push åˆ° `main`ã€`develop` åˆ†æ”¯
- Pull Request å‰µå»º/æ›´æ–°
- æ‰‹å‹•è§¸ç™¼

#### CI æµç¨‹æ­¥é©Ÿ

```
1. ä»£ç¢¼æª¢æŸ¥ (Code Quality)
   â”œâ”€ ä»£ç¢¼æ ¼å¼æª¢æŸ¥ (Checkstyle/Spotless)
   â”œâ”€ éœæ…‹ä»£ç¢¼åˆ†æ (SonarQube/SonarLint)
   â””â”€ å®‰å…¨æƒæ (OWASP Dependency Check)

2. ç·¨è­¯ (Build)
   â”œâ”€ å¾Œç«¯ç·¨è­¯ (Maven)
   â””â”€ å‰ç«¯ç·¨è­¯ (npm build)

3. æ¸¬è©¦ (Test)
   â”œâ”€ å¾Œç«¯å–®å…ƒæ¸¬è©¦
   â”œâ”€ å¾Œç«¯æ•´åˆæ¸¬è©¦
   â”œâ”€ å‰ç«¯å–®å…ƒæ¸¬è©¦ (å¯é¸)
   â””â”€ ä»£ç¢¼è¦†è“‹ç‡å ±å‘Š (JaCoCo)

4. æ§‹å»º Docker æ˜ åƒ
   â”œâ”€ å¾Œç«¯ Docker æ˜ åƒ
   â””â”€ å‰ç«¯ Docker æ˜ åƒ

5. æ¨é€æ˜ åƒåˆ° Registry
   â””â”€ Docker Hub / GitHub Container Registry / ç§æœ‰ Registry
```

### éšæ®µ 2: CD (Continuous Deployment)

#### ç’°å¢ƒç­–ç•¥

```
é–‹ç™¼ç’°å¢ƒ (Development)
â”œâ”€ è‡ªå‹•éƒ¨ç½²: Push åˆ° develop åˆ†æ”¯
â”œâ”€ è³‡æ–™åº«: Docker Compose (æœ¬åœ°)
â””â”€ ç”¨é€”: é–‹ç™¼æ¸¬è©¦

æ¸¬è©¦ç’°å¢ƒ (Staging)
â”œâ”€ è‡ªå‹•éƒ¨ç½²: Merge åˆ° main åˆ†æ”¯
â”œâ”€ è³‡æ–™åº«: æ¸¬è©¦ç’°å¢ƒ Oracle
â””â”€ ç”¨é€”: æ•´åˆæ¸¬è©¦ã€UAT

ç”Ÿç”¢ç’°å¢ƒ (Production)
â”œâ”€ æ‰‹å‹•éƒ¨ç½²: å‰µå»º Release Tag
â”œâ”€ è³‡æ–™åº«: ç”Ÿç”¢ç’°å¢ƒ Oracle
â””â”€ ç”¨é€”: æ­£å¼ç’°å¢ƒ
```

## ğŸ“ æª”æ¡ˆçµæ§‹

```
order-currency-system/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ ci.yml              # CI æµç¨‹
â”‚       â”œâ”€â”€ cd-dev.yml          # é–‹ç™¼ç’°å¢ƒéƒ¨ç½²
â”‚       â”œâ”€â”€ cd-staging.yml      # æ¸¬è©¦ç’°å¢ƒéƒ¨ç½²
â”‚       â””â”€â”€ cd-prod.yml         # ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²
â”œâ”€â”€ Dockerfile                  # å¾Œç«¯ Dockerfile
â”œâ”€â”€ Dockerfile.frontend         # å‰ç«¯ Dockerfile
â”œâ”€â”€ docker-compose.ci.yml      # CI æ¸¬è©¦ç”¨ Docker Compose
â””â”€â”€ .dockerignore               # Docker å¿½ç•¥æª”æ¡ˆ
```

## ğŸ› ï¸ æŠ€è¡“é¸é …

### CI/CD å¹³å°é¸æ“‡

**é¸é … 1: GitHub Actions** (æ¨è–¦)
- âœ… èˆ‡ GitHub æ·±åº¦æ•´åˆ
- âœ… å…è²»é¡åº¦å……è¶³
- âœ… é…ç½®ç°¡å–®
- âœ… æ”¯æ´çŸ©é™£æ§‹å»º

**é¸é … 2: GitLab CI/CD**
- âœ… åŠŸèƒ½å¼·å¤§
- âœ… å…§å»º Docker Registry
- âš ï¸ éœ€è¦è‡ªå»º GitLab æˆ–ä½¿ç”¨ GitLab.com

**é¸é … 3: Jenkins**
- âœ… é«˜åº¦å¯å®šåˆ¶
- âš ï¸ éœ€è¦è‡ªå»ºä¼ºæœå™¨
- âš ï¸ é…ç½®è¼ƒè¤‡é›œ

### Docker Registry é¸æ“‡

1. **Docker Hub** (å…¬é–‹/ç§æœ‰)
2. **GitHub Container Registry (ghcr.io)**
3. **ç§æœ‰ Registry** (å¦‚ Harbor)

## ğŸ“Š æ¸¬è©¦ç­–ç•¥

### å¾Œç«¯æ¸¬è©¦
- **å–®å…ƒæ¸¬è©¦**: Serviceã€Repository å±¤
- **æ•´åˆæ¸¬è©¦**: Controller å±¤ + æ¸¬è©¦è³‡æ–™åº« (H2)
- **è¦†è“‹ç‡ç›®æ¨™**: â‰¥ 70%

### å‰ç«¯æ¸¬è©¦
- **å–®å…ƒæ¸¬è©¦**: Vue çµ„ä»¶æ¸¬è©¦ (Vitest)
- **E2E æ¸¬è©¦**: Playwright / Cypress (å¯é¸)

## ğŸ” å®‰å…¨è€ƒé‡

1. **æ•æ„Ÿè³‡è¨Šç®¡ç†**
   - ä½¿ç”¨ GitHub Secrets å„²å­˜å¯†ç¢¼ã€API Key
   - ä½¿ç”¨ç’°å¢ƒè®Šæ•¸æ³¨å…¥é…ç½®

2. **ä¾è³´æƒæ**
   - OWASP Dependency Check
   - npm audit (å‰ç«¯)

3. **æ˜ åƒæƒæ**
   - Trivy / Snyk æƒæ Docker æ˜ åƒæ¼æ´

## ğŸ“ˆ ç›£æ§èˆ‡é€šçŸ¥

1. **æ§‹å»ºé€šçŸ¥**
   - Slack / Teams é€šçŸ¥
   - Email é€šçŸ¥ï¼ˆå¤±æ•—æ™‚ï¼‰

2. **éƒ¨ç½²ç‹€æ…‹**
   - GitHub Status Checks
   - éƒ¨ç½²æ—¥èªŒè¨˜éŒ„

## ğŸš€ éƒ¨ç½²ç­–ç•¥

### è—ç¶ éƒ¨ç½² (Blue-Green Deployment)
- ä¿æŒèˆŠç‰ˆæœ¬é‹è¡Œ
- éƒ¨ç½²æ–°ç‰ˆæœ¬åˆ°æ–°ç’°å¢ƒ
- åˆ‡æ›æµé‡åˆ°æ–°ç‰ˆæœ¬
- é©—è­‰ç„¡èª¤å¾Œé—œé–‰èˆŠç‰ˆæœ¬

### æ»¾å‹•æ›´æ–° (Rolling Update)
- é€æ­¥æ›¿æ›èˆŠå®¹å™¨
- é›¶åœæ©Ÿæ™‚é–“
- è‡ªå‹•å›æ»¾æ©Ÿåˆ¶

## ğŸ“ ç‰ˆæœ¬ç®¡ç†

### èªç¾©åŒ–ç‰ˆæœ¬ (Semantic Versioning)
- `MAJOR.MINOR.PATCH` (ä¾‹å¦‚: 1.2.3)
- è‡ªå‹•å¾ Git Tag ç”Ÿæˆç‰ˆæœ¬è™Ÿ
- è‡ªå‹•æ›´æ–° `pom.xml` å’Œ `package.json`

## âš™ï¸ é…ç½®ç®¡ç†

### ç’°å¢ƒé…ç½®æª”æ¡ˆ
- `application-dev.properties` - é–‹ç™¼ç’°å¢ƒ
- `application-staging.properties` - æ¸¬è©¦ç’°å¢ƒ
- `application-prod.properties` - ç”Ÿç”¢ç’°å¢ƒ

### é…ç½®æ³¨å…¥
- ä½¿ç”¨ç’°å¢ƒè®Šæ•¸è¦†è“‹æ•æ„Ÿé…ç½®
- ä½¿ç”¨ ConfigMap (Kubernetes) æˆ– Docker Secrets

## ğŸ¯ å¯¦æ–½å„ªå…ˆç´š

### Phase 1: åŸºç¤ CI (é«˜å„ªå…ˆç´š)
- [x] ä»£ç¢¼ç·¨è­¯
- [x] å–®å…ƒæ¸¬è©¦
- [x] ä»£ç¢¼è¦†è“‹ç‡
- [x] Docker æ˜ åƒæ§‹å»º

### Phase 2: é€²éš CI (ä¸­å„ªå…ˆç´š)
- [ ] éœæ…‹ä»£ç¢¼åˆ†æ
- [ ] å®‰å…¨æƒæ
- [ ] æ•´åˆæ¸¬è©¦
- [ ] å‰ç«¯æ¸¬è©¦

### Phase 3: CD (ä¸­å„ªå…ˆç´š)
- [ ] è‡ªå‹•éƒ¨ç½²åˆ°é–‹ç™¼ç’°å¢ƒ
- [ ] è‡ªå‹•éƒ¨ç½²åˆ°æ¸¬è©¦ç’°å¢ƒ
- [ ] éƒ¨ç½²é€šçŸ¥

### Phase 4: ç”Ÿç”¢éƒ¨ç½² (ä½å„ªå…ˆç´š)
- [ ] ç”Ÿç”¢ç’°å¢ƒè‡ªå‹•éƒ¨ç½²
- [ ] è—ç¶ éƒ¨ç½²
- [ ] è‡ªå‹•å›æ»¾æ©Ÿåˆ¶

## ğŸ“š åƒè€ƒè³‡æº

- [GitHub Actions æ–‡æª”](https://docs.github.com/en/actions)
- [Spring Boot Docker æŒ‡å—](https://spring.io/guides/gs/spring-boot-docker/)
- [Vue.js éƒ¨ç½²æŒ‡å—](https://vuejs.org/guide/scaling-up/deployment.html)


